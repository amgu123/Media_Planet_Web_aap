<div class="row mb-4 animate__animated animate__fadeIn">
    <div class="col-md-6">
        <h4 class="fw-bold mb-1">Application Configuration</h4>
        <p class="text-muted">Manage system-wide settings and parameters.</p>
    </div>
    <div class="col-md-6 text-md-end">
        <button class="btn btn-primary d-flex align-items-center ms-auto" (click)="openModal()">
            <i class="bi bi-plus-lg me-2"></i> Add New Config
        </button>
    </div>
</div>

<div class="card border-0 shadow-sm animate__animated animate__fadeInUp">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="bg-light">
                    <tr>
                        <th class="ps-4" style="width: 250px;">Config Key</th>
                        <th>Value</th>
                        <th>Description</th>
                        <th class="text-end pe-4" style="width: 150px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let config of configs">
                        <td class="ps-4">
                            <span class="fw-semibold text-primary d-block">{{ config.configKey }}</span>
                        </td>
                        <td>
                            <code class="text-dark bg-light px-2 py-1 rounded small">{{ config.configValue }}</code>
                        </td>
                        <td>
                            <span class="text-muted small">{{ config.description || 'No description' }}</span>
                        </td>
                        <td class="text-end pe-4">
                            <div class="d-flex justify-content-end gap-2">
                                <button class="btn btn-sm btn-outline-primary" (click)="editConfig(config)"
                                    title="Edit">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger" (click)="deleteConfig(config.id!)"
                                    title="Delete">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    <tr *ngIf="configs.length === 0">
                        <td colspan="4" class="text-center py-5">
                            <div class="text-muted">
                                <i class="bi bi-gear-wide-connected fs-1 d-block mb-3 opacity-25"></i>
                                No configurations found.
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Config Modal -->
<div class="modal-backdrop fade show" *ngIf="showModal"></div>
<div class="modal fade show d-block" *ngIf="showModal">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header">
                <h5 class="modal-title fw-bold">
                    {{ editingConfigId ? 'Edit Configuration' : 'Add New Configuration' }}
                </h5>
                <button type="button" class="btn-close" (click)="closeModal()"></button>
            </div>
            <div class="modal-body p-4">
                <form [formGroup]="configForm">
                    <div class="mb-3">
                        <label class="form-label fw-semibold small text-uppercase">Config Key</label>
                        <input type="text" class="form-control" formControlName="configKey"
                            placeholder="e.g. API_RETRY_COUNT" [readOnly]="editingConfigId">
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-semibold small text-uppercase">Config Value</label>
                        <textarea class="form-control" formControlName="configValue" rows="3"
                            placeholder="Enter value..."></textarea>
                    </div>
                    <div class="mb-0">
                        <label class="form-label fw-semibold small text-uppercase">Description</label>
                        <input type="text" class="form-control" formControlName="description"
                            placeholder="What is this config for?">
                    </div>
                </form>
            </div>
            <div class="modal-footer border-top-0 p-4 pt-0">
                <button type="button" class="btn btn-light px-4" (click)="closeModal()">Cancel</button>
                <button type="button" class="btn btn-primary px-4" [disabled]="configForm.invalid"
                    (click)="saveConfig()">
                    {{ editingConfigId ? 'Update' : 'Save' }}
                </button>
            </div>
        </div>
    </div>
</div>